(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{YIVK:function(t,e,a){"use strict";a.r(e);var i=a("Valr"),n=a("DUip"),r=a("JEAp"),c=a("hKG7"),o=a("9PA8"),b=a("TYT/"),u=a("s4wE"),s=a("3uGU"),l=a("QJY3");function d(t,e){1&t&&b.Nb(0,"span",28)}function g(t,e){if(1&t){var a=b.Qb();b.Pb(0,"tr",23),b.Xb("click",(function(){b.fc(a);var t=e.$implicit;return b.Zb().selectwatherRequest(t)})),b.Pb(1,"td",24),b.kc(2,d,1,0,"span",25),b.Ob(),b.Pb(3,"td"),b.Nb(4,"ngx-barcode6",26),b.Ob(),b.Pb(5,"td"),b.lc(6),b.Ob(),b.Pb(7,"td"),b.Pb(8,"input",27),b.Xb("ngModelChange",(function(t){return b.fc(a),e.$implicit.activo=t})),b.Ob(),b.Ob(),b.Ob()}if(2&t){var i=e.$implicit,n=b.Zb();b.Ab(2),b.ac("ngIf",n.wather_requestSelected===i),b.Ab(2),b.ac("bc-format",n.bctype)("bc-value",i.code)("bc-display-value",!0),b.Ab(2),b.mc(i.quantity),b.Ab(2),b.ac("ngModel",i.activo)}}function h(t,e){1&t&&(b.Pb(0,"button",29),b.lc(1,"Primera"),b.Ob())}function f(t,e){if(1&t){var a=b.Qb();b.Pb(0,"button",30),b.Xb("click",(function(){return b.fc(a),b.Zb().goToPage(1)})),b.lc(1,"Primera"),b.Ob()}}function P(t,e){if(1&t){var a=b.Qb();b.Pb(0,"button",31),b.Xb("click",(function(){b.fc(a);var t=b.Zb();return t.goToPage(1*t.currentPage-1)})),b.lc(1),b.Ob()}if(2&t){var i=b.Zb();b.Ab(1),b.mc(1*i.currentPage-1)}}function p(t,e){if(1&t){var a=b.Qb();b.Pb(0,"button",32),b.Xb("click",(function(){b.fc(a);var t=b.Zb();return t.goToPage(1*t.currentPage+1)})),b.lc(1),b.Ob()}if(2&t){var i=b.Zb();b.Ab(1),b.mc(1*i.currentPage+1)}}function v(t,e){if(1&t){var a=b.Qb();b.Pb(0,"button",33),b.Xb("click",(function(){b.fc(a);var t=b.Zb();return t.goToPage(t.lastPage)})),b.lc(1,"\xdaltima"),b.Ob()}}function w(t,e){1&t&&(b.Pb(0,"button",34),b.lc(1,"\xdaltima"),b.Ob())}function m(t,e){if(1&t&&b.Nb(0,"ngx-barcode6",26),2&t){var a=b.Zb(2);b.ac("bc-format",a.bctype)("bc-value",a.wather_requestSelected.code)("bc-display-value",!0)}}function y(t,e){if(1&t){var a=b.Qb();b.Pb(0,"div",0),b.Pb(1,"div",35),b.Pb(2,"div",36),b.Pb(3,"div",37),b.Pb(4,"div",38),b.Pb(5,"div",0),b.Pb(6,"div",2),b.Pb(7,"div",39),b.Pb(8,"label",40),b.lc(9,"C\xf3digo de Barras"),b.Ob(),b.Pb(10,"div",2),b.kc(11,m,1,3,"ngx-barcode6",41),b.Ob(),b.Ob(),b.Pb(12,"div",39),b.Pb(13,"label",42),b.lc(14,"Cantidad (mL)"),b.Ob(),b.Pb(15,"input",43),b.Xb("ngModelChange",(function(t){return b.fc(a),b.Zb().wather_requestSelected.quantity=t})),b.Ob(),b.Ob(),b.Pb(16,"div",39),b.Pb(17,"label",44),b.lc(18,"Activo"),b.Ob(),b.Pb(19,"input",45),b.Xb("ngModelChange",(function(t){return b.fc(a),b.Zb().wather_requestSelected.activo=t})),b.Ob(),b.Ob(),b.Ob(),b.Ob(),b.Pb(20,"div",46),b.Pb(21,"div",47),b.Pb(22,"button",48),b.Xb("click",(function(){return b.fc(a),b.Zb().saveDialogResult()})),b.lc(23,"Guardar"),b.Ob(),b.Pb(24,"button",49),b.Xb("click",(function(){return b.fc(a),b.Zb().cancelDialogResult()})),b.lc(25,"Cancelar"),b.Ob(),b.Ob(),b.Ob(),b.Ob(),b.Ob(),b.Ob(),b.Ob(),b.Ob()}if(2&t){var i=b.Zb();b.Ab(11),b.ac("ngIf",""!=i.wather_requestSelected.code),b.Ab(4),b.ac("ngModel",i.wather_requestSelected.quantity),b.Ab(4),b.ac("ngModel",i.wather_requestSelected.activo),b.Ab(3),b.ac("disabled",i.wather_requestSelected.quantity>1e3||i.wather_requestSelected.quantity<=0)}}var O=[{path:"",component:function(){function t(t,e){this.toastr=t,this.wather_requestDataService=e,this.wather_requests=[],this.wather_requestSelected=new o.a,this.currentPage=1,this.lastPage=1,this.showDialog=!1,this.recordsByPage=5,this.bctype="CODE128",this.userData=null}return t.prototype.ngOnInit=function(){this.userData=JSON.parse(sessionStorage.getItem("user")),this.goToPage(1)},t.prototype.selectwatherRequest=function(t){this.wather_requestSelected=t},t.prototype.goToPage=function(t){t<1||t>this.lastPage?this.toastr.errorToastr("La p\xe1gina solicitada no existe.","Error"):(this.currentPage=t,this.getwatherRequests())},t.prototype.getwatherRequests=function(){var t=this;this.wather_requests=[],this.wather_requestSelected=new o.a,this.wather_requestSelected.user_id=this.userData.id,this.wather_requestDataService.get_paginate_my_requests(this.recordsByPage,this.currentPage,this.userData.id).then((function(e){t.wather_requests=e.data,t.lastPage=e.last_page})).catch((function(t){return console.log(t)}))},t.prototype.newwatherRequest=function(){this.wather_requestSelected=new o.a,this.wather_requestSelected.user_id=this.userData.id,this.wather_requestSelected.code=this.getUniqueId(8),this.showDialog=!0},t.prototype.editwatherRequest=function(){void 0!==this.wather_requestSelected.id?this.showDialog=!0:this.toastr.errorToastr("Debe seleccionar un registro.","Error")},t.prototype.deletewatherRequest=function(){var t=this;void 0!==this.wather_requestSelected.id?this.wather_requestDataService.delete(this.wather_requestSelected.id).then((function(e){t.toastr.successToastr("Registro Borrado satisfactoriamente.","Borrar"),t.getwatherRequests()})).catch((function(t){return console.log(t)})):this.toastr.errorToastr("Debe seleccionar un registro.","Error")},t.prototype.toCSV=function(){this.wather_requestDataService.get().then((function(t){var e="id;code;quantity;user_id\n";t.forEach((function(t){e+=t.id+";"+t.code+";"+t.quantity+";"+t.user_id+"\n"}));var a=new Blob([e],{type:"text/plain"}),i=new Date;Object(r.saveAs)(a,i.toLocaleDateString()+"_watherRequests.csv")})).catch((function(t){return console.log(t)}))},t.prototype.saveDialogResult=function(){var t=this;void 0===this.wather_requestSelected.id?this.wather_requestDataService.post(this.wather_requestSelected).then((function(e){t.toastr.successToastr("Datos guardados satisfactoriamente.","Nuevo"),window.location.reload()})).catch((function(t){return console.log(t)})):this.wather_requestDataService.put(this.wather_requestSelected).then((function(e){t.toastr.successToastr("Registro actualizado satisfactoriamente.","Actualizar"),window.location.reload()})).catch((function(t){return console.log(t)}))},t.prototype.cancelDialogResult=function(){this.showDialog=!1,this.goToPage(this.currentPage)},t.prototype.getUniqueId=function(t){for(var e=[],a=0;a<t;a++){var i=Math.floor(9*Math.random()).toString();e.push(i)}return e.join("")},t.\u0275fac=function(e){return new(e||t)(b.Mb(u.a),b.Mb(c.a))},t.\u0275cmp=b.Gb({type:t,selectors:[["app-main"]],decls:43,vars:11,consts:[[1,"row"],[1,"cell-12","text-right"],[1,"cell-12"],[1,"toolbar"],["title","Actualizar",1,"tool-button","primary",3,"click"],[1,"fas","fa-sync"],["title","Nuevo",1,"tool-button","success","ml-2",3,"click"],[1,"fas","fa-file"],["title","Exportar CSV",1,"tool-button","dark",3,"click"],[1,"fas","fa-file-csv"],[1,"table","row-hover","mt-2"],[3,"click",4,"ngFor","ngForOf"],["type","button","class","button light","title","Primera P\xe1gina","disabled","",4,"ngIf"],["type","button","class","button light","title","Primera P\xe1gina",3,"click",4,"ngIf"],["type","button","class","button light","title","P\xe1gina Anterior",3,"click",4,"ngIf"],["type","button","title","P\xe1gina Actual",1,"button","primary"],["type","button","class","button light","title","P\xe1gina Siguiente",3,"click",4,"ngIf"],["type","button","class","button light","title","\xdaltima P\xe1gina",3,"click",4,"ngIf"],["type","button","class","button light","title","\xdaltima P\xe1gina","disabled","",4,"ngIf"],["type","button","title","Ir a la P\xe1gina",1,"button","success","ml-2",3,"click"],["type","number","placeholder","Ir a la P\xe1gina",3,"min","max"],["goToPageNumber",""],["class","row",4,"ngIf"],[3,"click"],[1,"text-right"],["class","far fa-hand-point-right",4,"ngIf"],[3,"bc-format","bc-value","bc-display-value"],["type","checkbox","data-role","switch","readonly","","id","activo","name","activo",3,"ngModel","ngModelChange"],[1,"far","fa-hand-point-right"],["type","button","title","Primera P\xe1gina","disabled","",1,"button","light"],["type","button","title","Primera P\xe1gina",1,"button","light",3,"click"],["type","button","title","P\xe1gina Anterior",1,"button","light",3,"click"],["type","button","title","P\xe1gina Siguiente",1,"button","light",3,"click"],["type","button","title","\xdaltima P\xe1gina",1,"button","light",3,"click"],["type","button","title","\xdaltima P\xe1gina","disabled","",1,"button","light"],[1,"cell-12","mt-5"],["data-role","window","data-icon","<span class='mif-pencil'></span>","data-title","Datos:","data-btn-close","false","data-btn-min","false","data-btn-max","false","data-width","800","data-shadow","true","data-place","top-center","data-resizable","false","data-draggable","false",1,"window"],[1,"window-content","m-2"],[1,"container"],[1,"form-group","row"],["for","code"],[3,"bc-format","bc-value","bc-display-value",4,"ngIf"],["for","quantity"],["type","number","id","quantity","min","0","max","1000","name","quantity","placeholder","Cantidad (mL)",3,"ngModel","ngModelChange"],["for","activo"],["type","checkbox","readonly","","data-role","switch","id","activo","name","activo",3,"ngModel","ngModelChange"],[1,"row","mt-2"],[1,"cell","text-center"],["type","button",1,"button","success",3,"disabled","click"],["type","button",1,"button","alert",3,"click"]],template:function(t,e){if(1&t){var a=b.Qb();b.Pb(0,"div",0),b.Pb(1,"h1",1),b.lc(2," Mis Solicitudes de Agua "),b.Ob(),b.Ob(),b.Pb(3,"div",0),b.Pb(4,"div",2),b.Pb(5,"div",3),b.Pb(6,"button",4),b.Xb("click",(function(){return e.goToPage(e.currentPage)})),b.Nb(7,"i",5),b.Ob(),b.Pb(8,"button",6),b.Xb("click",(function(){return e.newwatherRequest()})),b.Nb(9,"i",7),b.Ob(),b.Pb(10,"button",8),b.Xb("click",(function(){return e.toCSV()})),b.Nb(11,"i",9),b.Ob(),b.Ob(),b.Ob(),b.Ob(),b.Pb(12,"div",0),b.Pb(13,"div",2),b.Pb(14,"table",10),b.Pb(15,"thead"),b.Pb(16,"tr"),b.Pb(17,"th"),b.lc(18,"Seleccionado"),b.Ob(),b.Pb(19,"th"),b.lc(20,"C\xf3digo de Barras"),b.Ob(),b.Pb(21,"th"),b.lc(22,"Cantidad (mL)"),b.Ob(),b.Pb(23,"th"),b.lc(24,"Activo"),b.Ob(),b.Ob(),b.Ob(),b.Pb(25,"tbody"),b.kc(26,g,9,6,"tr",11),b.Ob(),b.Ob(),b.Ob(),b.Ob(),b.Pb(27,"div",0),b.Pb(28,"div",2),b.Pb(29,"div",3),b.kc(30,h,2,0,"button",12),b.kc(31,f,2,0,"button",13),b.kc(32,P,2,1,"button",14),b.Pb(33,"button",15),b.lc(34),b.Ob(),b.kc(35,p,2,1,"button",16),b.kc(36,v,2,0,"button",17),b.kc(37,w,2,0,"button",18),b.Pb(38,"button",19),b.Xb("click",(function(){b.fc(a);var t=b.ec(41);return e.goToPage(t.value)})),b.lc(39,"Ir a"),b.Ob(),b.Nb(40,"input",20,21),b.Ob(),b.Ob(),b.Ob(),b.kc(42,y,26,4,"div",22)}2&t&&(b.Ab(26),b.ac("ngForOf",e.wather_requests),b.Ab(4),b.ac("ngIf",1===e.currentPage),b.Ab(1),b.ac("ngIf",1!==e.currentPage),b.Ab(1),b.ac("ngIf",e.currentPage>1),b.Ab(2),b.mc(e.currentPage),b.Ab(1),b.ac("ngIf",e.currentPage<e.lastPage),b.Ab(1),b.ac("ngIf",e.currentPage!==e.lastPage),b.Ab(1),b.ac("ngIf",e.currentPage===e.lastPage),b.Ab(3),b.bc("min",1),b.bc("max",e.lastPage),b.Ab(2),b.ac("ngIf",e.showDialog))},directives:[i.h,i.i,s.a,l.a,l.d,l.g,l.i,l.b],styles:[""]}),t}()}],q=function(){function t(){}return t.\u0275mod=b.Kb({type:t}),t.\u0275inj=b.Jb({factory:function(e){return new(e||t)},imports:[[n.e.forChild(O)],n.e]}),t}();a.d(e,"MainModule",(function(){return k}));var k=function(){function t(){}return t.\u0275mod=b.Kb({type:t}),t.\u0275inj=b.Jb({factory:function(e){return new(e||t)},providers:[c.a],imports:[[i.b,q,l.c,s.b]]}),t}()}}]);